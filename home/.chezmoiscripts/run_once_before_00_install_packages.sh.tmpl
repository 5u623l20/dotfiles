#!/bin/sh
{{ if (ne .chezmoi.os "darwin") -}}
#set -ue

{{ template "helpers.tmpl" . }}
{{ if or (eq .chezmoi.osRelease.id "ubuntu") (eq .chezmoi.osRelease.id "debian") }}
###############################################################################
###############################Install terminfo ###############################
###############################################################################
curl -fsSl https://raw.githubusercontent.com/kovidgoyal/kitty/master/terminfo/kitty.terminfo -o ~/kitty.terminfo
tic -x -o ~/.terminfo ~/kitty.terminfo
rm ~/kitty.terminfo
{{ end }}
###############################################################################
#################################Install git  #################################
###############################################################################
{{ if .gotroot }}
if [ -z "$GIT_BIN" ]; then
$PKG_CMD $GIT_PKG
fi
{{ end }}
###############################################################################
#################################Install vim  #################################
###############################################################################
{{ if .gotroot }}
if [ -z "$VIM_BIN" ]; then
$PKG_CMD $VIM_PKG
fi
{{ end }}
###############################################################################
#################################Install zsh  #################################
###############################################################################
if [ -z "$ZSH_BIN" ]; then
{{ if .gotroot }}
$PKG_CMD $ZSH_PKG
{{ else }}
if [ ! -x "$HOME"/.local/bin/zsh ]; then
  if command_exists curl; then
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/romkatv/zsh-bin/master/install)" -q -d "${HOME}"/.local -e no
  elif command_exists wget; then
    sh -c "$(wget -O- https://raw.githubusercontent.com/romkatv/zsh-bin/master/install)" -q -d "${HOME}"/.local -e no
  elif command_exists fetch; then
    sh -c "$(fetch -q -o - https://raw.githubusercontent.com/romkatv/zsh-bin/master/install)" -q -d "${HOME}"/.local -e no
  fi
fi
{{ end }}
fi
{{ end }}
# vim: ft=sh:

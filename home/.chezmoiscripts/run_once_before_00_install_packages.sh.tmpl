#!/bin/sh
{{ if (ne .chezmoi.os "darwin") -}}
#set -ue

{{ template "helpers.tmpl" . }}
{{ if or (eq .chezmoi.osRelease.id "ubuntu") (eq .chezmoi.osRelease.id "debian") }}
###############################################################################
##############################Install terminfo ################################
###############################################################################
curl -fsSl https://raw.githubusercontent.com/kovidgoyal/kitty/master/terminfo/kitty.terminfo -o ~/kitty.terminfo
tic -x -o ~/.terminfo ~/kitty.terminfo
rm ~/kitty.terminfo
{{ end }}
###############################################################################
##############################Install bat #####################################
###############################################################################
{{ if .gotroot }}
if [ -z "$BAT_BIN" ]; then
$PKG_CMD $BAT_PKG
fi
{{ end }}
###############################################################################
##############################Install fzf #####################################
###############################################################################
if [ -z "$FZF_BIN" ]; then
{{ if .gotroot }}
$PKG_CMD $FZF_PKG
{{ else }}
if [ ! -x "$HOME"/.local/bin/fzf ]; then
  if command_exists curl; then
    cd "$HOME"/.local && curl -fsSL https://raw.githubusercontent.com/junegunn/fzf/master/install | sh -s -- --bin && cd -
  elif command_exists wget; then
    cd "$HOME"/.local && wget -O- https://raw.githubusercontent.com/junegunn/fzf/master/install | sh -s -- --bin && cd -
  elif command_exists fetch; then
    cd "$HOME"/.local && fetch -q -o - https://raw.githubusercontent.com/junegunn/fzf/master/install | sh -s -- --bin && cd -
  fi
fi
{{ end }}
fi
###############################################################################
################################Install git  ##################################
###############################################################################
{{ if .gotroot }}
if [ -z "$GIT_BIN" ]; then
$PKG_CMD $GIT_PKG
fi
{{ end }}
###############################################################################
################################Install htop  #################################
###############################################################################
{{ if .gotroot }}
if [ -z "$HTOP_BIN" ]; then
$PKG_CMD $HTOP_PKG
fi
{{ end }}
###############################################################################
################################Install tmux  #################################
###############################################################################
{{ if .gotroot }}
if [ -z "$TMUX_BIN" ]; then
$PKG_CMD $TMUX_PKG
fi
{{ end }}
###############################################################################
################################Install vim  ##################################
###############################################################################
{{ if .gotroot }}
if [ -z "$VIM_BIN" ]; then
$PKG_CMD $VIM_PKG
fi
{{ end }}
###############################################################################
################################Install zsh  ##################################
###############################################################################
if [ -z "$ZSH_BIN" ]; then
{{ if .gotroot }}
$PKG_CMD $ZSH_PKG
{{ else }}
if [ ! -x "$HOME"/.local/bin/zsh ]; then
  if command_exists curl; then
    curl -fsSL https://raw.githubusercontent.com/romkatv/zsh-bin/master/install | sh -s -- -q -d "${HOME}"/.local -e no
  elif command_exists wget; then
    wget -O- https://raw.githubusercontent.com/romkatv/zsh-bin/master/install | sh -s -- -q -d "${HOME}"/.local -e no
  elif command_exists fetch; then
    fetch -q -o - https://raw.githubusercontent.com/romkatv/zsh-bin/master/install | sh -s -- -q -d "${HOME}"/.local -e no
  fi
fi
{{ end }}
fi
{{ end }}
# vim: ft=sh:
